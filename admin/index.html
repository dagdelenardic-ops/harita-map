<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeopolitik Harita - Admin Paneli</title>
    <link rel="stylesheet" href="admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-globe-europe"></i> Jeopolitik Harita - Admin Paneli</h1>
            <div class="header-actions">
                <button class="btn btn-primary" onclick="openModal()">
                    <i class="fas fa-plus"></i> Yeni Olay Ekle
                </button>
                <button class="btn btn-secondary" onclick="exportJSON()">
                    <i class="fas fa-download"></i> JSON Indir
                </button>
                <label class="btn btn-secondary">
                    <i class="fas fa-upload"></i> JSON Yukle
                    <input type="file" id="importFile" accept=".json" onchange="importJSON(event)" style="display: none;">
                </label>
            </div>
        </header>

        <div class="filters">
            <div class="filter-group">
                <label>Ulke:</label>
                <select id="filterCountry" onchange="applyFilters()">
                    <option value="">Tumu</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Dekad:</label>
                <select id="filterDecade" onchange="applyFilters()">
                    <option value="">Tumu</option>
                    <option value="1920s">1920s</option>
                    <option value="1930s">1930s</option>
                    <option value="1940s">1940s</option>
                    <option value="1950s">1950s</option>
                    <option value="1960s">1960s</option>
                    <option value="1970s">1970s</option>
                    <option value="1980s">1980s</option>
                    <option value="1990s">1990s</option>
                    <option value="2000s">2000s</option>
                    <option value="2010s">2010s</option>
                    <option value="2020s">2020s</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Kategori:</label>
                <select id="filterCategory" onchange="applyFilters()">
                    <option value="">Tumu</option>
                    <option value="war">Savas/Catisma</option>
                    <option value="genocide">Soykirim</option>
                    <option value="revolution">Devrim/Rejim Degisikligi</option>
                    <option value="terror">Teror Saldirisi</option>
                    <option value="leader">Onemli Lider</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Ara:</label>
                <input type="text" id="filterSearch" placeholder="Baslik ara..." oninput="applyFilters()">
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <i class="fas fa-calendar-alt"></i>
                <span id="totalEvents">0</span>
                <label>Toplam Olay</label>
            </div>
            <div class="stat-card">
                <i class="fas fa-flag"></i>
                <span id="totalCountries">0</span>
                <label>Ulke</label>
            </div>
            <div class="stat-card war">
                <i class="fas fa-fire"></i>
                <span id="totalWars">0</span>
                <label>Savas</label>
            </div>
            <div class="stat-card genocide">
                <i class="fas fa-skull"></i>
                <span id="totalGenocides">0</span>
                <label>Soykirim</label>
            </div>
            <div class="stat-card revolution">
                <i class="fas fa-flag"></i>
                <span id="totalRevolutions">0</span>
                <label>Devrim</label>
            </div>
        </div>

        <table id="eventsTable">
            <thead>
                <tr>
                    <th>Ulke</th>
                    <th>Yil</th>
                    <th>Kategori</th>
                    <th>Baslik</th>
                    <th>Aciklama</th>
                    <th>Islemler</th>
                </tr>
            </thead>
            <tbody id="eventsBody">
            </tbody>
        </table>

        <div id="noResults" class="no-results" style="display: none;">
            <i class="fas fa-search"></i>
            <p>Sonuc bulunamadi</p>
        </div>
    </div>

    <!-- Modal for Add/Edit Event -->
    <div id="eventModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Yeni Olay Ekle</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <form id="eventForm" onsubmit="saveEvent(event)">
                <input type="hidden" id="eventId">

                <div class="form-row">
                    <div class="form-group">
                        <label for="countryName">Ulke Adi *</label>
                        <input type="text" id="countryName" required placeholder="ornek: Turkiye">
                    </div>
                    <div class="form-group">
                        <label for="countryCode">Ulke Kodu *</label>
                        <input type="text" id="countryCode" required placeholder="ornek: TR" maxlength="3">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="eventLat">Enlem *</label>
                        <input type="number" id="eventLat" required step="any" placeholder="ornek: 39.9334">
                    </div>
                    <div class="form-group">
                        <label for="eventLon">Boylam *</label>
                        <input type="number" id="eventLon" required step="any" placeholder="ornek: 32.8597">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="eventYear">Yil *</label>
                        <input type="number" id="eventYear" required min="1920" max="2030" placeholder="ornek: 1923">
                    </div>
                    <div class="form-group">
                        <label for="eventDecade">Dekad *</label>
                        <select id="eventDecade" required>
                            <option value="">Secin</option>
                            <option value="1920s">1920s</option>
                            <option value="1930s">1930s</option>
                            <option value="1940s">1940s</option>
                            <option value="1950s">1950s</option>
                            <option value="1960s">1960s</option>
                            <option value="1970s">1970s</option>
                            <option value="1980s">1980s</option>
                            <option value="1990s">1990s</option>
                            <option value="2000s">2000s</option>
                            <option value="2010s">2010s</option>
                            <option value="2020s">2020s</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="eventCategory">Kategori *</label>
                    <select id="eventCategory" required>
                        <option value="">Secin</option>
                        <option value="war">Savas/Catisma</option>
                        <option value="genocide">Soykirim</option>
                        <option value="revolution">Devrim/Rejim Degisikligi</option>
                        <option value="terror">Teror Saldirisi</option>
                        <option value="leader">Onemli Lider</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="eventTitle">Baslik *</label>
                    <input type="text" id="eventTitle" required placeholder="Olayin basligi">
                </div>

                <div class="form-group">
                    <label for="eventDescription">Aciklama *</label>
                    <textarea id="eventDescription" required rows="3" placeholder="Olayin kisa aciklamasi"></textarea>
                </div>

                <div class="form-group">
                    <label for="eventWikipedia">Wikipedia URL</label>
                    <input type="url" id="eventWikipedia" placeholder="https://en.wikipedia.org/wiki/...">
                </div>

                <div class="form-group">
                    <label for="eventCasualties">Kayip Sayisi</label>
                    <input type="number" id="eventCasualties" min="0" placeholder="ornek: 50000">
                </div>

                <div class="form-group">
                    <label for="eventKeyFigures">Onemli Isimler (virgul ile ayirin)</label>
                    <input type="text" id="eventKeyFigures" placeholder="ornek: Mustafa Kemal Ataturk, Ismet Inonu">
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Iptal</button>
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Silme Onayi</h2>
                <button class="close-btn" onclick="closeDeleteModal()">&times;</button>
            </div>
            <p>Bu olayi silmek istediginizden emin misiniz?</p>
            <p class="delete-event-title" id="deleteEventTitle"></p>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="closeDeleteModal()">Iptal</button>
                <button type="button" class="btn btn-danger" onclick="confirmDelete()">Sil</button>
            </div>
        </div>
    </div>

    <script src="admin.js"></script>
</body>
</html>
